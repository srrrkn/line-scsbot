services:
  db:
    image: mysql:latest
    volumes:
    - ../db/initdb.d:/docker-entrypoint-initdb.d
    - ../db/data:/var/lib/mysql
    environment:
      MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}
  app:
    image: line-scs-bot:latest 
    volumes:
      - ../cmd:/go/cmd
      - ./.env:/.env
      - ./ssl:/ssl
    depends_on:
      - db
    ports:
      - ${HTTP_PORT}:80
      - ${HTTPS_PORT}:443
    tty: true
    extra_hosts:
      - host.docker.internal:host-gateway"